{% extends "base.html" %}
{% block content %}
  <div class="topbar">
    <h2>ğŸ’µ å‡ºç²®è®°å½•</h2>
    <div class="exports"><a href="{{ url_for('export_salaries') }}">å¯¼å‡º CSV</a></div>
  </div>

  <div class="panel">
    <form action="{{ url_for('salaries_add') }}" method="post">
      <div class="grid-form">
        <div>
          <label>å·¥äºº *</label>
          <select name="worker_id" required>
            <option value="">è¯·é€‰æ‹©</option>
            {% for w in workers %}
              <option value="{{ w.id }}">{{ w.name }}</option>
            {% endfor %}
          </select>
        </div>
        <div>
          <label>å‡ºç²®é‡‘é¢ *</label>
          <input name="salary_amount" type="number" step="0.01" required placeholder="0.00" />
        </div>
        <div>
          <label>å‡ºç²®æ—¥æœŸï¼ˆYYYY-MM-DDï¼‰*</label>
          <input name="pay_date" type="date" required />
        </div>
        <div>
          <label>å¤‡æ³¨</label>
          <input name="note" placeholder="å¯ç•™ç©º" />
        </div>
        <div>
          <button class="btn" type="submit" style="width:100%;">â• æ–°å¢</button>
        </div>
      </div>
    </form>

    <div style="overflow:auto;">
      <table>
        <thead>
          <tr>
            <th>ID</th><th>å·¥äºº</th><th>é‡‘é¢</th><th>å‡ºç²®æ—¥æœŸ</th><th>å¤‡æ³¨</th><th>åˆ›å»ºæ—¶é—´</th>
          </tr>
        </thead>
        <tbody>
          {% for r in rows %}
          <tr>
            <td>{{ r.id }}</td>
            <td>{{ r.worker_name }}</td>
            <td>{{ '%.2f'|format(r.salary_amount or 0) }}</td>
            <td>{{ r.pay_date }}</td>
            <td>{{ r.note or '' }}</td>
            <td>{{ r.created_at }}</td>
          </tr>
          {% else %}
          <tr><td colspan="6" class="muted" style="text-align:center;">æš‚æ— æ•°æ®</td></tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>
{% endblock %}
