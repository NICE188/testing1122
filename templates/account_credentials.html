{% extends "base.html" %}
{% block title %}修改登录账号/密码 · {{ t.app_name }}{% endblock %}
{% block page_title %}🧑‍💻 修改登录账号/密码{% endblock %}

{% block content %}
<div class="panel">
  {% if ok %}
    <div class="badge on">已保存</div>
  {% elif err == 'bad_old' %}
    <div class="badge off">旧密码不正确</div>
  {% elif err == 'dup_name' %}
    <div class="badge off">用户名已存在</div>
  {% elif err == 'pwd_mismatch' %}
    <div class="badge off">两次新密码不一致</div>
  {% elif err == 'pwd_short' %}
    <div class="badge off">新密码至少 6 位</div>
  {% endif %}

  <form method="post" class="form" action="/account-credentials">
    <input type="text" name="new_username" placeholder="新的用户名（可选）" value="{{ current_username }}">
    <input type="password" name="old_pwd" placeholder="旧密码（必填）" required>
    <input type="password" name="new_pwd" placeholder="新密码（可选）">
    <input type="password" name="new_pwd2" placeholder="确认新密码（可选）">
    <button class="btn">保存</button>
  </form>

  <p style="color:#9ca3af;margin-top:8px">
    说明：只改用户名或只改密码都可以；但必须填写旧密码用于验证。
  </p>
</div>
{% endblock %}
