<!doctype html>
<html lang="{{ 'zh' if lang=='zh' else 'en' }}">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>{% block title %}{{ t.app_name }}{% endblock %}</title>

  <!-- ä½ ç°æœ‰çš„å…¨ç«™æ ·å¼ -->
  <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}"/>

  <style>
    /* ä»…åšä¸€ç‚¹ç‚¹å…œåº•æ ·å¼ï¼šè‹¥ä½ çš„ style.css å·²æœ‰åŒåç±»ï¼Œä¼šè¢«å®ƒè¦†ç›– */
    body{margin:0;background:#0b1220;color:#e7ebf3;font:15px/1.6 system-ui,-apple-system,Segoe UI,Roboto,Inter,Helvetica,Arial}
    .layout{display:grid;grid-template-columns:260px 1fr;min-height:100vh}
    .sidebar{background:#0e1626;border-right:1px solid rgba(148,163,184,.15);padding:18px 14px;position:sticky;top:0;height:100vh}
    .brand{display:flex;align-items:center;gap:10px;font-weight:700;margin:4px 6px 18px 6px}
    .brand .name{font-size:18px}
    .nav{list-style:none;margin:0;padding:0;display:grid;gap:8px}
    .nav a{display:flex;gap:10px;align-items:center;padding:10px 12px;border-radius:12px;color:#d7deea;text-decoration:none;border:1px solid transparent}
    .nav a:hover{background:#101a2e;border-color:rgba(148,163,184,.25)}
    .nav li.active>a{background:#13203a;border-color:#2a3e6b}
    .section-title{color:#9fb0ca;font-size:12px;margin:16px 6px 8px}
    .lang{margin-top:14px;color:#9fb0ca;font-size:13px}
    .lang a{color:#60a5fa;text-decoration:none;margin:0 6px}
    .userline{margin:12px 6px 6px;color:#9fb0ca;font-size:13px}
    .main{padding:22px 22px 40px}
    .page-header{display:flex;justify-content:space-between;align-items:center;gap:18px;flex-wrap:wrap;margin-bottom:14px}
    .page-title{font-size:22px;margin:0}
    .header-actions{display:flex;gap:8px;flex-wrap:wrap}
    .btn{padding:8px 12px;border-radius:10px;border:1px solid rgba(148,163,184,.25);background:#151f33;color:#e7ebf3;text-decoration:none}
    .content{background:rgba(16,22,39,.65);border:1px solid rgba(148,163,184,.18);border-radius:16px;padding:16px}
  </style>

  {% block head %}{% endblock %}
</head>
<body class="layout">

  <!-- ============ Sidebar ============ -->
  <aside class="sidebar">
    <div class="brand">
      <span style="font-size:20px">ğŸ˜ˆ</span>
      <span class="name">{{ t.app_name }}</span>
    </div>

    <div class="userline">
      {% if session.get('user_id') %}
        {{ 'ç”¨æˆ·' if lang=='zh' else 'User' }}: <b>{{ session.get('user_id') }}</b>
      {% endif %}
    </div>

    {% macro item(href, label, icon) -%}
      <li class="{{ 'active' if request.path.startswith(href) else '' }}">
        <a href="{{ href }}"><span style="width:1.2em;text-align:center">{{ icon }}</span> {{ label }}</a>
      </li>
    {%- endmacro %}

    <ul class="nav">
      {{ item(url_for('home'), t.dashboard, 'ğŸ ') }}
      {{ item(url_for('workers_list'), t.workers, 'ğŸ‘¨â€ğŸ’¼ğŸ“²') }}
      {{ item(url_for('bank_accounts_list'), t.bank_accounts, 'ğŸ¦') }}
      {{ item(url_for('card_rentals_list'), t.card_rentals, 'ğŸ’³') }}
      {{ item(url_for('salaries_list'), t.salaries, 'ğŸ’µ') }}
      {{ item(url_for('expenses_list'), t.expenses, 'ğŸ’¸') }}

      <div class="section-title">{{ 'å®‰å…¨è®¾ç½®' if lang=='zh' else 'Security' }}</div>
      <!-- ğŸ” è¿™é‡Œå°±æ˜¯ä½ è¦çš„ 3 ä¸ªå…¥å£ -->
      {{ item(url_for('account_security'), t.account_security, 'ğŸ”') }}
      {{ item(url_for('account_security') ~ '#pw', t.change_pw, 'ğŸ§©') }}
      {{ item(url_for('account_security') ~ '#uid', t.change_user_id, 'ğŸ†”') }}

      <div class="section-title">{{ 'ä¼šè¯' if lang=='zh' else 'Session' }}</div>
      {{ item(url_for('logout'), t.logout, 'ğŸšª') }}
    </ul>

    <div class="lang">
      {{ t.language }}:
      <a href="{{ request.path }}?lang=zh">ä¸­æ–‡</a> |
      <a href="{{ request.path }}?lang=en">English</a>
    </div>
  </aside>

  <!-- ============ Main ============ -->
  <main class="main">
    <header class="page-header">
      <h1 class="page-title">{% block page_title %}{% endblock %}</h1>
      <div class="header-actions">
        {% block header_actions %}{% endblock %}
      </div>
    </header>

    <section class="content">
      {% block content %}{% endblock %}
    </section>

    {% block modals %}{% endblock %}
  </main>

  {% block scripts %}{% endblock %}
</body>
</html>
