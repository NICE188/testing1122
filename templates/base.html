<!doctype html>
<html lang="zh">
<head>
  <meta charset="utf-8">
  <title>Worker & Platform Manager</title>
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <link href="https://unpkg.com/missing.css" rel="stylesheet">
  <style>
    :root {
      --sidebar-w: 240px;
      --bg: #0f172a;
      --bg-2: #111827;
      --fg: #e5e7eb;
      --fg-dim: #9ca3af;
      --brand: #f59e0b;
    }
    * { box-sizing: border-box; }
    body { margin: 0; background: #0b1020; color: var(--fg); }

    /* Layout */
    .layout { display: flex; min-height: 100vh; }
    aside.sidebar {
      width: var(--sidebar-w);
      background: linear-gradient(180deg, var(--bg), var(--bg-2));
      border-right: 1px solid rgba(255,255,255,.06);
      padding: 16px 12px;
      position: sticky; top: 0; height: 100vh;
    }
    .brand {
      display: flex; align-items: center; gap: 10px;
      font-weight: 700; letter-spacing:.2px; margin: 4px 6px 16px;
    }
    .brand .dot { width: 9px; height: 9px; border-radius: 999px; background: var(--brand); box-shadow: 0 0 12px var(--brand); }
    nav.menu { display: grid; gap: 6px; margin-top: 6px; }
    nav.menu a {
      display: flex; align-items: center; gap: 10px;
      padding: 10px 12px; border-radius: 10px; color: var(--fg);
      text-decoration: none; font-weight: 600;
    }
    nav.menu a:hover { background: rgba(255,255,255,.06); }
    nav.menu a.active { background: rgba(245, 158, 11, .18); color: #fff; outline: 1px solid rgba(245, 158, 11, .35); }
    nav.menu small { color: var(--fg-dim); font-weight: 600; margin: 10px 8px 4px; text-transform: uppercase; letter-spacing:.5px; }

    main.content {
      flex: 1;
      padding: 22px 22px 40px 22px;
      max-width: 1200px;
      width: 100%;
      margin: 0 auto;
    }

    /* é¡¶éƒ¨æ ï¼ˆç§»åŠ¨ç«¯æ˜¾ç¤ºï¼‰ */
    .topbar {
      display: none;
      position: sticky; top: 0; left: 0; right: 0;
      background: rgba(15,23,42,.65);
      backdrop-filter: blur(10px);
      padding: 10px 12px; z-index: 20;
      border-bottom: 1px solid rgba(255,255,255,.06);
    }
    .topbar .row { display: flex; align-items: center; justify-content: space-between; }
    .btn {
      display: inline-flex; align-items: center; gap: 8px;
      background: rgba(255,255,255,.06); color: var(--fg);
      border: 1px solid rgba(255,255,255,.08); border-radius: 10px;
      padding: 8px 12px; text-decoration: none; cursor: pointer;
    }
    .btn:hover { background: rgba(255,255,255,.12); }

    /* Responsiveï¼šå°å±ä¾§è¾¹æ å¯æŠ˜å  */
    @media (max-width: 900px) {
      aside.sidebar {
        position: fixed; z-index: 30; height: 100vh; left: -260px; top: 0;
        transition: left .25s ease;
      }
      aside.sidebar.open { left: 0; }
      main.content { padding: 16px 14px 40px 14px; }
      .topbar { display: block; }
      .layout { padding-top: 56px; }
    }

    /* è¡¨æ ¼/è¡¨å•å¾®è°ƒï¼Œæ²¿ç”¨åŸé¡µé¢ */
    table { width: 100%; border-collapse: collapse; }
    table th, table td { padding: 8px 10px; border-bottom: 1px solid rgba(255,255,255,.08); }
    form .row { display: grid; grid-template-columns: repeat(auto-fit,minmax(180px,1fr)); gap: 8px; }
    a.export { color: #fde68a; }
  </style>
</head>
<body>

<!-- ç§»åŠ¨ç«¯é¡¶æ  -->
<div class="topbar">
  <div class="row">
    <div style="display:flex;align-items:center;gap:10px;">
      <button id="btnToggle" class="btn" type="button">â˜° èœå•</button>
      <strong>Worker & Platform Manager</strong>
    </div>
    <a class="btn" href="/">æ¦‚è§ˆ</a>
  </div>
</div>

<div class="layout">
  <!-- ä¾§è¾¹æ  -->
  <aside class="sidebar" id="sidebar">
    <div class="brand">
      <span class="dot"></span>
      <span>W&P Manager</span>
    </div>

    <nav class="menu">
      <small>å¯¼èˆª</small>
      <a href="{{ url_for('home') }}"
         class="{% if request.path == '/' %}active{% endif %}">ğŸ  æ¦‚è§ˆ</a>

      <a href="{{ url_for('workers_list') }}"
         class="{% if request.path.startswith('/workers') %}active{% endif %}">ğŸ‘· å·¥äºº/å¹³å°</a>

      <a href="{{ url_for('bank_accounts_list') }}"
         class="{% if request.path.startswith('/bank-accounts') %}active{% endif %}">ğŸ¦ é“¶è¡Œè´¦æˆ·</a>

      <a href="{{ url_for('card_rentals_list') }}"
         class="{% if request.path.startswith('/card-rentals') %}active{% endif %}">ğŸ’³ é“¶è¡Œå¡ç§Ÿé‡‘</a>

      <a href="{{ url_for('salaries_list') }}"
         class="{% if request.path.startswith('/salaries') %}active{% endif %}">ğŸ’° å‡ºç²®è®°å½•</a>

      <small>å¯¼å‡º CSV</small>
      <a href="/export/workers.csv">ğŸ“¤ å·¥äºº/å¹³å°</a>
      <a href="/export/bank_accounts.csv">ğŸ“¤ é“¶è¡Œè´¦æˆ·</a>
      <a href="/export/card_rentals.csv">ğŸ“¤ é“¶è¡Œå¡ç§Ÿé‡‘</a>
      <a href="/export/salaries.csv">ğŸ“¤ å‡ºç²®è®°å½•</a>
    </nav>
  </aside>

  <!-- ä¸»å†…å®¹ -->
  <main class="content">
    {% block content %}{% endblock %}
  </main>
</div>

<script>
  // ç§»åŠ¨ç«¯ï¼šå±•å¼€/æ”¶èµ·ä¾§è¾¹æ 
  const btn = document.getElementById('btnToggle');
  const sb  = document.getElementById('sidebar');
  if (btn) btn.addEventListener('click', () => {
    sb.classList.toggle('open');
  });
  // ç‚¹å‡»å†…å®¹åŒºæ—¶æ”¶èµ·
  document.addEventListener('click', (e) => {
    const within = sb.contains(e.target) || (btn && btn.contains(e.target));
    if (!within) sb.classList.remove('open');
  });
</script>
</body>
</html>
