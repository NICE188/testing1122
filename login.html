<!doctype html>
<html lang="{{ 'zh' if lang == 'zh' else 'en' }}">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>{{ '登录' if lang=='zh' else 'Login' }} · {{ t['app_name'] }}</title>

  <!-- 登录页专属风格（玻璃拟态 + 高级渐变光晕） -->
  <style>
    :root{
      --bg:#0b1324;          /* 页面背景 */
      --panel:#141c2d;       /* 卡片底色 */
      --text:#e6ecf5;        /* 文字主色 */
      --muted:#9fb0c9;       /* 次要文字 */
      --brand:#facc15;       /* 品牌高光 */
      --ring:#3659d6;        /* 聚焦描边 */
      --line:rgba(148,163,184,.18);
      --shadow:0 18px 50px rgba(0,0,0,.35);
    }
    *,*:before,*:after{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font:16px/1.55 Inter,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,"Noto Sans","PingFang SC","Microsoft YaHei",sans-serif;
      color:var(--text);
      background:
        radial-gradient(1200px 600px at 80% -120px, rgba(54,89,214,.22), transparent 55%),
        radial-gradient(900px 520px at -200px 80%, rgba(250,204,21,.10), transparent 60%),
        linear-gradient(180deg, #0b1324, #0a1220);
      /* 想用“几何三角形大图”可打开下两行：
      background:
        url("https://i.imgur.com/RUhZHD9.jpeg") center/cover fixed no-repeat,
        radial-gradient(1200px 600px at 80% -120px, rgba(54,89,214,.22), transparent 55%),
        linear-gradient(180deg, #0b1324, #0a1220);
      */
    }
    .grid{min-height:100%; display:grid; place-items:center; padding:28px}

    .card{
      width:min(92vw,540px);
      background:linear-gradient(180deg, rgba(20,28,45,.92), rgba(20,28,45,.86));
      border:1px solid var(--line);
      border-radius:20px;
      padding:26px 26px 20px;
      box-shadow:var(--shadow);
      backdrop-filter: blur(12px) saturate(1.05);
    }
    .brand{
      display:flex; align-items:center; justify-content:space-between; gap:8px;
      margin-bottom:12px;
    }
    .logo{
      display:flex; align-items:center; gap:10px;
      font-weight:900; letter-spacing:.3px;
    }
    .logo-badge{
      width:26px; height:26px; border-radius:8px;
      background: conic-gradient(from 180deg, #60a5fa, #a78bfa, #60a5fa);
      box-shadow:0 0 0 3px rgba(96,165,250,.18);
    }
    .logo-title{ font-size:18px }
    .title{
      display:flex; align-items:center; gap:8px;
      font-size:22px; font-weight:800; letter-spacing:.3px; margin:2px 2px 10px;
    }
    .subtitle{color:var(--muted); font-size:13px; margin:-2px 2px 18px}

    .field{margin-bottom:12px}
    .label{font-size:13px; color:#cbd5e1; margin:0 4px 6px; display:block}
    .input{
      width:100%; padding:12px 14px; border-radius:12px;
      background:rgba(11,17,32,.9); color:var(--text);
      border:1px solid rgba(148,163,184,.28);
      outline:none; transition:.18s ease;
    }
    .input:focus{
      border-color:rgba(54,89,214,.6);
      box-shadow:0 0 0 3px rgba(54,89,214,.18);
      background:rgba(14,21,38,.96);
    }
    .error{
      margin:-4px 2px 12px; padding:10px 12px; border-radius:12px;
      border:1px solid rgba(239,68,68,.4);
      background:linear-gradient(180deg, rgba(239,68,68,.14), rgba(239,68,68,.10));
      color:#fecaca; font-size:13px;
    }

    .actions{display:flex; align-items:center; justify-content:flex-start; gap:10px; margin-top:8px}
    .btn{
      padding:10px 14px; border-radius:12px; cursor:pointer; border:1px solid rgba(148,163,184,.28);
      color:#0b1324; font-weight:800; letter-spacing:.2px;
      background:linear-gradient(180deg, #ffd84a, #facc15);
      box-shadow:inset 0 1px 0 rgba(255,255,255,.5), 0 10px 20px rgba(250,204,21,.25);
      transition: transform .08s ease, filter .18s ease;
    }
    .btn:active{ transform: translateY(1px); }
    .btn:hover{ filter:brightness(1.04); }

    .lang{margin-top:16px; color:var(--muted); font-size:13px}
    .lang a{color:#cfe1ff; text-decoration:none}
    .lang a:hover{text-decoration:underline}

    .meta{ margin-top:14px; font-size:12px; color:#94a3b8 }
    .meta .dot{opacity:.65}
    .center{ text-align:center; }

    @media (max-width:560px){
      .card{ padding:22px 18px; border-radius:16px; }
      .title{ font-size:20px }
    }
  </style>
</head>
<body>
  <!-- 模板版本：{{ version_tag or 'LOGIN-TPL-V7' }} -->
  <div class="grid">
    <form class="card" action="{{ url_for('login_post') }}" method="post" novalidate>
      <div class="brand">
        <div class="logo">
          <div class="logo-badge" aria-hidden="true"></div>
          <div class="logo-title">{{ t['app_name'] }}</div>
        </div>
      </div>

      <div class="title">{{ '登录' if lang=='zh' else 'Login' }}</div>
      <div class="subtitle">
        {% if lang=='zh' %} 请输入管理员账号登录系统 {% else %} Please sign in with admin account {% endif %}
      </div>

      {% if error %}<div class="error">{{ error }}</div>{% endif %}
      <input type="hidden" name="next" value="{{ next_url or url_for('home') }}">

      <div class="field">
        <label class="label">{{ t['username'] }}</label>
        <input class="input" type="text" name="username" autocomplete="username" autofocus required>
      </div>

      <div class="field">
        <label class="label">{{ t['password'] }}</label>
        <input class="input" type="password" name="password" autocomplete="current-password" required>
      </div>

      <div class="actions">
        <button class="btn" type="submit">{{ t['login'] }}</button>
      </div>

      <div class="lang">
        {{ '语言' if lang=='zh' else 'Language' }}：
        <a href="{{ url_for('login', next=next_url, lang='zh') }}">中文</a> |
        <a href="{{ url_for('login', next=next_url, lang='en') }}">English</a>
      </div>

      <div class="meta center">
        © {{ t['app_name'] }} · <span class="dot">●</span>
        <span>{{ '安全登录' if lang=='zh' else 'Secure Sign In' }}</span>
      </div>
    </form>
  </div>
</body>
</html>
